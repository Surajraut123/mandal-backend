generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model contributions {
  contribution_id   Int       @id @default(autoincrement())
  user_id           Int?
  amount            Decimal   @db.Decimal(12, 2)
  contribution_date DateTime? @default(now()) @db.Timestamptz(6)
  donor_name        String?   @db.VarChar(200)
  phone_no          String?   @unique @db.VarChar(15)
  users             users?    @relation(fields: [user_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
}

model investments {
  investment_id Int       @id @default(autoincrement())
  title         String    @db.VarChar(100)
  description   String?
  amount        Decimal   @db.Decimal(12, 2)
  shopname      String    @db.VarChar(200)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_by    Int?
  users         users?    @relation(fields: [updated_by], references: [user_id], onDelete: NoAction, onUpdate: NoAction)
}

model logs {
  log_id      Int       @id @default(autoincrement())
  user_id     Int?
  action      String    @db.VarChar(200)
  action_type String?   @db.VarChar(50)
  created_at  DateTime? @default(now()) @db.Timestamptz(6)
  users       users?    @relation(fields: [user_id], references: [user_id], onDelete: NoAction, onUpdate: NoAction)
}

model mandals {
  mandal_id            Int       @id @default(autoincrement())
  mandal_name          String    @db.VarChar(100)
  db_connection_string String
  created_at           DateTime? @default(now()) @db.Timestamp(6)
}

model roles {
  role_id    Int       @id @default(autoincrement())
  role_name  String    @db.VarChar(50)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  users      users[]
}

model users {
  user_id       Int             @id @default(autoincrement())
  firstname     String?         @db.VarChar(50)
  lastname      String?         @db.VarChar(50)
  email         String?         @unique @db.VarChar(100)
  password      String?         @db.VarChar(200)
  phone_no      String?         @db.VarChar(15)
  profile       String?         @db.VarChar(200)
  status        Boolean?        @default(true)
  role_id       Int?
  created_at    DateTime?       @default(now()) @db.Timestamptz(6)
  contributions contributions[]
  investments   investments[]
  logs          logs[]
  roles         roles?          @relation(fields: [role_id], references: [role_id], onDelete: NoAction, onUpdate: NoAction)
  contribution_requests contribution_requests[]
}

model contribution_requests {
  request_id Int   @id @default(autoincrement())
  user_id         Int
  donor_name      String
  phone_no        String   @default("")
  amount          String
  request_status  String   @default("")
  created_at      DateTime @default(now())

  users users @relation(fields: [user_id], references: [user_id], onDelete: Cascade)

  @@map("contribution_requests")
}
